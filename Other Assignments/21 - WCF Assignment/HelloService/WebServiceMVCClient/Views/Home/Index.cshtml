@model WebServiceMVCClient.Models.HelloRequest
@{
    ViewBag.Title = "Home Page";
}

<div class="row">
    <div class="col-md-10">
        <h4>Call WCF Service using Basic HTTP / TCP </h4>
        <form method="POST" name="frmInfo" id="wcfClientTest">
            <fieldset class="box-border">
              <h5>WCF Operations: </h5>
                <div class="row">
                    <input checked="checked"
                           id="wcfOperations"
                           name="wcfOperations"
                           type="radio"
                           value="SayHello" /> SayHello
                    <br />
                    <input id="wcfOperations"
                           name="wcfOperations"
                           type="radio"
                           value="TodayProgram" />TodayProgram
                </div>
                <div>
                    <hr />
                    @Html.TextBox("txtName")   &nbsp;  &nbsp;
                    <input type="button" id="btnHttp" class="btn btn-default" title="Call WCF using basic Http" value="Using Basic Http" onclick="HttpOnClick()" />
                    @*onclick="location.href='@Url.Action("UsingHTTP", "Home", new { opt="2", name="sharad" })'" />*@
                    &nbsp;  &nbsp;
                    <input type="button" id="btntcp" class="btn btn-default" title="Call WCF using TCP" value="Using TCP" onclick="TcpOnClick()" />
                </div>
            </fieldset>
        </form>
    </div>
</div>
<hr />
<div class="row">
    <div class="col-md-10">
        <h4>Service Response</h4>
        <p>@ViewBag.ServiceResponse</p>
    </div>
</div>
<script type="text/javascript">
    function TcpOnClick() {

        var txtName = $("#txtName").val();
        var url = '@Url.Action("UsingTCP", "Home", new {Opt = "OPTION", name= "USER_NAME" })';
          url = url.replace("USER_NAME", $("#txtName").val());
           var selectedOperation = getRadioVal(document.getElementById("wcfClientTest"),'wcfOperations');

          url = url.replace("OPTION", selectedOperation);
         window.location.href = url.replace("&amp;", "&");
    }

    function HttpOnClick() {

        var txtName = $("#txtName").val();
          var url = '@Url.Action("UsingHTTP", "Home", new {Opt = "OPTION", name= "USER_NAME" })';
          url = url.replace("USER_NAME", $("#txtName").val());
           var selectedOperation = getRadioVal(document.getElementById("wcfClientTest"),'wcfOperations');

          url = url.replace("OPTION", selectedOperation);
         window.location.href = url.replace("&amp;", "&");
    }

    // return selected radio button text
    function getRadioVal(form, name) {
        var val;
        var radios = form.elements[name];
        for (var i = 0, len = radios.length; i < len; i++) {
            if (radios[i].checked) {
                val = radios[i].value;
                break;
            }
        }
        return val;
    }

</script>